# 랜덤값 추출 

[돌아가기](/../javascript/) [다음 페이지](/../javascript/docs/0721.html)

[샘플 코드](/../javascript/0720/)

JavaScript에 내장된 [Math 객체](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Math)를 통해 무작위 값을 생성할 수 있습니다. 

## Math 객체란 무엇인가?

Math 객체는 수학적인 상수와 함수를 위한 속성과 메서드를 가진 내장 객체입니다(함수 객체가 아니며, 인스턴스를 생성할 수 없습니다).

다른 전역 객체와 달리 `Math`는 생성자가 아닙니다. `Math`의 모든 속성과 메서드는 정적입니다. 파이 상수는 `Math.PI`로 참조할 수 있고, 사인 함수는 매개변수 `x`에 대해 `Math.sin(x)`와 같이 호출할 수 있습니다. 상수는 JavaScript에서 가능한 최대 실수 정밀도로 정의되어 있습니다.


## Math 객체엔 어떤 속성/메서드가 있는가?

Math 객체의 주요 속성/메서드는 다음과 같습니다.

```javascript
Math.max(53, 44, 20, 109) // 109
Math.round(6.210491) // 6
Math.sqrt(25) // 5
```

| 속성/메서드 | 설명 |
| --- | --- |
| Math.PI | 파이 상수 값 |
| Math.abs(x) | 주어진 숫자 `x`의 절댓값을 반환합니다.<br>- `x`에 빈 객체, 하나 이상의 요소를 가진 배열, 숫자가 아닌 문자열, `undefined`나 빈 매개변수를 넣으면 `NaN`을 반환합니다. <br>- `x`에 null, 빈 문자열이나 빈 배열을 넣으면 0을 반환합니다. |
| Math.ceil(x) | `x`를 반올림한 값을 반환합니다. |
| Math.floor(x) | `x`를 버림한 값을 반환합니다. |
| Math.round(x) | `x`를 반올림한 값을 반환합니다. |
| Math.max(x1, x2, ...) | 입력값으로 받은 수들 중 최댓값을 반환합니다.<br>- 배열 `arr`의 최댓값을 가진 원소를 구하려면 `Math.max(...arr)`을 사용해야 합니다. |
| Math.min(x1, x2, ...) | 입력값으로 받은 수들 중 최솟값을 반환합니다.<br>- 배열 `arr`의 최솟값을 가진 원소를 구하려면 `Math.min(...arr)`을 사용해야 합니다. |
| Math.exp(x) | `x`를 인수로 하는 e^x 값을 반환합니다. |
| Math.pow(x,y) | `x`, `y`를 인수로 하는 x^y 값을 반환합니다(또는 `x ** y`). |
| Math.log(x) | `x`를 인수로 하는 자연로그 log x를 반환합니다. |
| Math.sqrt(x) | `x`의 제곱근 √x을 반환합니다. |
| Math.random() | 0 이상 1 미만의 무작위 값을 가지는 소수를 반환합니다. |
| Math.sign(x) | `x`의 부호를 반환합니다(1, -1, 0, -0, NaN). |

## 컴퓨터가 하는 랜덤값 추출은 어떤 원리이며, 어떤 한계점이 있는가?

컴퓨터가 하는 랜덤값 추출은 0 이상 1 미만의 구간에서 근사적으로 균일한(approximately uniform) 부동소수점 의사난수를 반환하는 것입니다. 엄밀히 말하면 생성 조건에 따라 재현 가능한 값이기 때문에 '진짜' 난수라고 볼 수는 없습니다. 이러한 방법으로 생성하는 난수를 의사난수(pseudo-random numbers)라고 부릅니다.

> 컴퓨터에 의해 생성된 모든 난수는 의사(擬似) 난수이다. 컴퓨터는 계산된 결과만 가지고 난수를 생성할 수 있는데 이 계산된 결과는 입력값에 의해 결정된 값이기 때문에 이 값을 가지고는 난수를 생성할 수 없다. 컴퓨터의 최초 시동시 난수표가 생성되어 컴퓨터내에 보관된다. 하지만 컴퓨터 프로그래밍에서 매번 같은 방법으로 이 값을 가지고 오려고 한다면 매번 그 값은 같기 때문에 최초 한번 호출할 때를 제외하고는 난수라고 볼 수 없다. 그래서 보통 씨앗 값(Seed)이라 불리는 수를 인자로 매번 다르게 주어 매번 다른 의사난수를 추출하여 사용한다. 이 씨앗 값은 보통 시간을 이용한다. 여기서 시간은 보통 현재 시간을 의미한다. 매 순간 현재시간이 바뀌며 한 번 지나간 시간은 다시 돌아오지 않는다는 특성은 이전에 발생했던 의사난수 또는 의사난수열을 재연 불가능하게 만들며, 이 시간이 밀리초 단위로 섬세하게 표현된다면 사람에의한 임의적 조작도 사실상 불가능해진다.

출처: [위키백과 문서](https://ko.wikipedia.org/wiki/난수)

|![random_sample.png](https://www.lancaster.ac.uk/~blackb/images/random_sample.PNG)|
|:--:|
|<b>시드 없이 난수 생성 (R 이용)</b>|

|![set_seed.png](https://www.lancaster.ac.uk/~blackb/images/set_seed.PNG)|
|:--:|
|<b>동일 시드를 사용한 난수 생성 (R 이용)</b>|

출처: [How Computers Generate "Random" Numbers](https://www.lancaster.ac.uk/~blackb/RNG.html)

> 컴퓨터가 실제로 어떻게 난수를 생성할 수 있는지 궁금할 것입니다. 이 "무작위"는 어디에서 왔습니까? 컴퓨터 코드의 일부라면 컴퓨터가 생성하는 숫자를 예측할 수 있지 않을까요? 
> 
> 우리는 일반적으로 컴퓨터가 생성하는 난수를 생성 방법에 따라 "진정한" 난수와 의사 난수라는 두 가지 유형으로 그룹화합니다.
> 
> "진정한" 난수를 생성하기 위해 컴퓨터는 컴퓨터 외부에서 발생하는 일종의 물리적 현상을 측정합니다. 예를 들어, 컴퓨터는 원자의 방사성 붕괴를 측정할 수 있습니다. 양자 이론에 따르면 방사성 붕괴가 언제 일어날지 확실히 알 수 있는 방법이 없으므로 이것은 본질적으로 우주의 "순수한 무작위성"입니다. 공격자는 방사성 붕괴가 언제 발생할지 예측할 수 없으므로 임의 값을 알 수 없습니다.
>
> (중략)
> 의사 난수는 "진정한" 난수에 대한 대안입니다. 컴퓨터는 무작위로 보이지만 실제로는 예측 가능한 숫자를 생성하기 위해 시드 값과 알고리즘을 사용할 수 있습니다. 컴퓨터는 환경에서 임의의 데이터를 수집하지 않습니다.
>
> 이것이 모든 상황에서 반드시 나쁜 것은 아닙니다. 예를 들어 비디오 게임을 하는 경우 해당 게임에서 발생하는 이벤트가 "진정한" 난수 또는 의사 난수에 의해 발생했는지 여부는 실제로 중요하지 않습니다. 반면에 암호화를 사용하는 경우 공격자가 추측할 수 있는 의사 난수를 사용하고 싶지 않습니다.
>
> 예를 들어, 공격자가 의사 난수 생성기가 사용하는 알고리즘과 시드 값을 알고 있다고 가정해 보겠습니다. 그리고 암호화 알고리즘이 이 알고리즘에서 의사 난수를 가져와 추가 난수를 추가하지 않고 암호화 키를 생성하는 데 사용한다고 가정해 보겠습니다. 공격자가 충분히 알고 있다면 역으로 작업하여 암호화 알고리즘이 이 경우에 선택해야 하는 의사 난수를 결정하여 암호화를 깨뜨릴 수 있습니다.

출처: [How Computers Generate Random Numbers](https://www.howtogeek.com/183051/htg-explains-how-computers-generate-random-numbers/)


## 컴퓨터가 하는 랜덤값 추출의 한계를 극복하기 위한 어떤 시도들이 있는가?

양자 난수 생성기(Quantum Random Number Generator)가 그 대표적인 시도로 각광받고 있습니다.

![양자 난수 생성기](https://user-images.githubusercontent.com/52960121/126057547-298f8236-5e5c-4357-aa82-885c79fba95d.jpg)


> 양자난수생성기(Quantum Random Number Generator)는 양자의 특성을 이용해 예측이 불가능하고 패턴이 없는 '순수 난수(True Random Number)'를 지속적으로 만들어주는 장치다. 난수를 암호로 활용하면, 아무리 연산이 빠른 슈퍼컴퓨터라도 쉽게 암호를 풀어낼 수 없다. 해킹의 위험성이 현저히 낮아지는 것이다. 양자 난수의 뛰어난 보안성을 인지한 해외 각국들이 양자난수생성기를 개발하며 군사 등 특수 용도로 활용하고 있다. 

출처: [중앙일보](https://news.joins.com/article/21780693)
